(()=>{"use strict";var e={143:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(7537),i=n.n(r),s=n(3645),a=n.n(s)()(i());a.push([e.id,"html, body {\r\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n    margin: 0;\r\n    user-select: none;\r\n}\r\n\r\n#gameReturn {\r\n    background-color: royalblue;\r\n    border-radius: 5px;\r\n    padding: 10px;\r\n    margin: 20px 0;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    color: white;\r\n}\r\n\r\nform {\r\n    width: 150px;\r\n}\r\n\r\nform .row {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin: 5px 0;\r\n}\r\n\r\nform .row .col1 {\r\n    flex: 1;\r\n    text-align: right;\r\n    margin-right: 10px;\r\n}\r\nform .row .col2 {\r\n    flex: 1;\r\n}\r\nform .row .col2 > * {\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n}\r\nform .row #create {\r\n    width: 100%;\r\n    margin: 2px 0;\r\n}\r\n\r\nlevel-field {\r\n    padding-top: 100%;\r\n    border: 1px solid black;\r\n    margin: -1px;\r\n}\r\n\r\n#gridContainer {\r\n    height: 100%;\r\n    width: 100%;\r\n    padding: 50px;\r\n    box-sizing: border-box;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex: 1;\r\n}\r\n\r\n#grid {\r\n    display: grid;\r\n    grid-gap: 1px;\r\n    grid-template-rows: repeat(var(--grid-rows), 1fr);\r\n    grid-template-columns: repeat(var(--grid-cols), 1fr);\r\n    position: absolute;\r\n}\r\n\r\n#content {\r\n    width: 100vw;\r\n    height: 100vh;\r\n    display: flex;\r\n}\r\n\r\n#ui {\r\n    /* min-width: 200px; */\r\n    width: 350px;\r\n    background-color: powderblue;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n}\r\n\r\n#ui #instruction {\r\n    margin-top: 20px;\r\n}\r\n\r\n#ui #objects > * {\r\n    margin: 5px;\r\n}\r\n\r\n#objects {\r\n    display: flex;\r\n    /* flex-direction: column; */\r\n    flex-wrap: wrap;\r\n    /* height: 100%; */\r\n    align-items: flex-start;\r\n    justify-content: flex-start;\r\n}\r\n\r\nselect-field {\r\n    display: block;\r\n    width: 100px;\r\n    height: 20px;\r\n    border: 1px solid black;\r\n    text-align: center;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    /* font-size: 10px; */\r\n}\r\n\r\nselect-field.selected {\r\n    transform: scale(1.3);\r\n}","",{version:3,sources:["webpack://./src/levelEditor/style.css"],names:[],mappings:"AAAA;IACI,4DAA4D;IAC5D,SAAS;IACT,iBAAiB;AACrB;;AAEA;IACI,2BAA2B;IAC3B,kBAAkB;IAClB,aAAa;IACb,cAAc;IACd,aAAa;IACb,uBAAuB;IACvB,mBAAmB;IACnB,kBAAkB;IAClB,qBAAqB;IACrB,YAAY;AAChB;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,aAAa;IACb,uBAAuB;IACvB,mBAAmB;IACnB,aAAa;AACjB;;AAEA;IACI,OAAO;IACP,iBAAiB;IACjB,kBAAkB;AACtB;AACA;IACI,OAAO;AACX;AACA;IACI,WAAW;IACX,sBAAsB;AAC1B;AACA;IACI,WAAW;IACX,aAAa;AACjB;;AAEA;IACI,iBAAiB;IACjB,uBAAuB;IACvB,YAAY;AAChB;;AAEA;IACI,YAAY;IACZ,WAAW;IACX,aAAa;IACb,sBAAsB;;IAEtB,aAAa;IACb,uBAAuB;IACvB,mBAAmB;IACnB,OAAO;AACX;;AAEA;IACI,aAAa;IACb,aAAa;IACb,iDAAiD;IACjD,oDAAoD;IACpD,kBAAkB;AACtB;;AAEA;IACI,YAAY;IACZ,aAAa;IACb,aAAa;AACjB;;AAEA;IACI,sBAAsB;IACtB,YAAY;IACZ,4BAA4B;IAC5B,aAAa;IACb,sBAAsB;IACtB,mBAAmB;AACvB;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,WAAW;AACf;;AAEA;IACI,aAAa;IACb,4BAA4B;IAC5B,eAAe;IACf,kBAAkB;IAClB,uBAAuB;IACvB,2BAA2B;AAC/B;;AAEA;IACI,cAAc;IACd,YAAY;IACZ,YAAY;IACZ,uBAAuB;IACvB,kBAAkB;IAClB,aAAa;IACb,uBAAuB;IACvB,mBAAmB;IACnB,qBAAqB;AACzB;;AAEA;IACI,qBAAqB;AACzB",sourcesContent:["html, body {\r\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n    margin: 0;\r\n    user-select: none;\r\n}\r\n\r\n#gameReturn {\r\n    background-color: royalblue;\r\n    border-radius: 5px;\r\n    padding: 10px;\r\n    margin: 20px 0;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    color: white;\r\n}\r\n\r\nform {\r\n    width: 150px;\r\n}\r\n\r\nform .row {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin: 5px 0;\r\n}\r\n\r\nform .row .col1 {\r\n    flex: 1;\r\n    text-align: right;\r\n    margin-right: 10px;\r\n}\r\nform .row .col2 {\r\n    flex: 1;\r\n}\r\nform .row .col2 > * {\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n}\r\nform .row #create {\r\n    width: 100%;\r\n    margin: 2px 0;\r\n}\r\n\r\nlevel-field {\r\n    padding-top: 100%;\r\n    border: 1px solid black;\r\n    margin: -1px;\r\n}\r\n\r\n#gridContainer {\r\n    height: 100%;\r\n    width: 100%;\r\n    padding: 50px;\r\n    box-sizing: border-box;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex: 1;\r\n}\r\n\r\n#grid {\r\n    display: grid;\r\n    grid-gap: 1px;\r\n    grid-template-rows: repeat(var(--grid-rows), 1fr);\r\n    grid-template-columns: repeat(var(--grid-cols), 1fr);\r\n    position: absolute;\r\n}\r\n\r\n#content {\r\n    width: 100vw;\r\n    height: 100vh;\r\n    display: flex;\r\n}\r\n\r\n#ui {\r\n    /* min-width: 200px; */\r\n    width: 350px;\r\n    background-color: powderblue;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n}\r\n\r\n#ui #instruction {\r\n    margin-top: 20px;\r\n}\r\n\r\n#ui #objects > * {\r\n    margin: 5px;\r\n}\r\n\r\n#objects {\r\n    display: flex;\r\n    /* flex-direction: column; */\r\n    flex-wrap: wrap;\r\n    /* height: 100%; */\r\n    align-items: flex-start;\r\n    justify-content: flex-start;\r\n}\r\n\r\nselect-field {\r\n    display: block;\r\n    width: 100px;\r\n    height: 20px;\r\n    border: 1px solid black;\r\n    text-align: center;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    /* font-size: 10px; */\r\n}\r\n\r\nselect-field.selected {\r\n    transform: scale(1.3);\r\n}"],sourceRoot:""}]);const l=a},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var l=0;l<this.length;l++){var o=this[l][0];null!=o&&(a[o]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);r&&a[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},7537:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(i," */"),a=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[t].concat(a).concat([s]).join("\n")}return[t].join("\n")}},3379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},a=[],l=0;l<e.length;l++){var o=e[l],d=r.base?o[0]+r.base:o[0],c=s[d]||0,A="".concat(d," ").concat(c);s[d]=c+1;var h=n(A),u={css:o[1],media:o[2],sourceMap:o[3],supports:o[4],layer:o[5]};if(-1!==h)t[h].references++,t[h].updater(u);else{var p=i(u,r);r.byIndex=l,t.splice(l,0,{identifier:A,updater:p,references:1})}a.push(A)}return a}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var s=r(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<s.length;a++){var l=n(s[a]);t[l].references--}for(var o=r(e,i),d=0;d<s.length;d++){var c=n(s[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}s=o}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(3379),t=n.n(e),r=n(7795),i=n.n(r),s=n(569),a=n.n(s),l=n(3565),o=n.n(l),d=n(9216),c=n.n(d),A=n(4589),h=n.n(A),u=n(143),p={};p.styleTagTransform=h(),p.setAttributes=o(),p.insert=a().bind(null,"head"),p.domAPI=i(),p.insertStyleElement=c(),t()(u.Z,p),u.Z&&u.Z.locals&&u.Z.locals;class g extends HTMLElement{constructor(e){super(),this.value=null,this.colors=e}setValue(e){this.value=e,this.style.backgroundColor=e?this.colors.get(e):""}}class f extends g{constructor(e,t,n){super(n),this.x=e,this.y=t}get data(){return{x:this.x,y:this.y,value:this.value}}}customElements.define("level-field",f);class m{constructor(e,t,n,r){this.gridElement=document.getElementById("grid"),this.gridContainerElement=document.getElementById("gridContainer"),this.hasChanges=!1,this.fields=[],this.width=e,this.height=t,this.colors=n,this.width>this.height?this.orientation="landscape":this.width==this.height?this.orientation="square":this.width<this.height&&(this.orientation="horizontal"),this.gridElement.oncontextmenu=e=>e.preventDefault(),this.createGrid(),r&&r.forEach((e=>{const t=this.fields.find((t=>t.x==e.x&&t.y==e.y));this.setValue(t,e.value)}))}clearHtml(){this.gridElement.innerHTML=""}get isValid(){return this.fields.some((e=>"player"==e.value))}setValue(e,t){var n;"player"==t&&(null===(n=this.fields.find((e=>"player"==e.value)))||void 0===n||n.setValue(null)),e.setValue(t),this.hasChangesUpdate()}clearValue(e){e.setValue(null),this.hasChangesUpdate()}get data(){return{width:this.width,height:this.height,fields:this.fields.filter((e=>e.value)).map((e=>e.data))}}hasChangesUpdate(){this.fields.some((e=>e.value))?this.hasChanges=!0:this.hasChanges=!1}createGrid(){this.gridElement.style.setProperty("--grid-rows",this.height.toString()),this.gridElement.style.setProperty("--grid-cols",this.width.toString()),this.addResizeListener();for(let e=0;e<this.height;e++)for(let t=0;t<this.width;t++){const n=new f(t,e,this.colors);this.gridElement.appendChild(n),this.fields.push(n)}}addResizeListener(){this.gridElement.style.minWidth=this.widthToSet+"px",window.onresize=e=>{this.gridElement.style.minWidth=this.widthToSet+"px"}}get widthToSet(){const e=getComputedStyle(this.gridContainerElement),t=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)+1,n=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+1,r=this.gridContainerElement.clientHeight-t;let i=this.gridContainerElement.clientWidth-n;return i*this.height/this.width>r&&(i=r*this.width/this.height),i}}class v extends g{constructor(e,t){super(t),this.object=e,this.setValue(e)}connectedCallback(){this.innerText=this.object,this.style.backgroundColor=this.colors.get(this.value)}select(){this.classList.add("selected")}deselect(){this.classList.remove("selected")}}customElements.define("select-field",v);class B{constructor(e){this.objectsElement=document.getElementById("objects"),this.fields=[],this.selectedField=null,this.colors=e,this.objects=[...this.colors.keys()];for(let e of this.objects){const t=new v(e,this.colors);t.onclick=()=>{this.selectedField=t,this.fields.forEach((e=>e.deselect())),t.select()},this.objectsElement.appendChild(t),this.fields.push(t)}}get selectedValue(){return this.selectedField?this.selectedField.value:null}}const C=new Map([["demo",0],["deathcam",1],["puddle",2],["greenBarrel",3],["table",4],["blood",5],["flag",6],["standingLamp",8],["goldenLamp",9],["hangingSkeleton",10],["pillar",12],["bones1",13],["pots",14],["furnance",15],["greenPlant",16],["skeleton",17],["sink",18],["brownPlant",19],["urn",20],["bones2",21],["bones3",22],["table",24],["lamp",25],["morePots",26],["armor",27],["cage",28],["spears",29],["vines",30],["skeletonCage",32],["bones",33],["bed",36],["bucket",40],["bloodBones",57],["brownBarrel",58],["well",59],["emptyWell",60]]);class b{constructor(){this.editedLevel=null,this.colors=new Map([["door","chocolate"],["secretDoor","#73de33"],["exitDoor","#5fff00"],["wall","lightslategray"],["wallH","lightslategray"],["wallE","lightslategray"],["wallF","lightslategray"],["blueWall","#5c60fc"],["blueWallB","#5c60fc"],["blueWallS","#5c60fc"],["brownWall","#7f5526"],["brownWallE","#7f5526"],["brownWallH","#7f5526"],["wallSecret","lightslategray"],["wallSecretH","lightslategray"],["wallSecretE","lightslategray"],["wallSecretF","lightslategray"],["blueWallSecret","#5c60fc"],["blueWallSecretB","#5c60fc"],["blueWallSecretS","#5c60fc"],["brownWallSecret","#7f5526"],["brownWallSecretE","#7f5526"],["brownWallSecretH","#7f5526"],["player","forestgreen"],["enemyUp","#e84868"],["enemyDown","#e84868"],["enemyLeft","#e84868"],["enemyRight","#e84868"],["enemyXWalking","#e84868"],["enemyZWalking","#e84868"],["dogFood","#c75454"],["food","#cc3333"],["health","red"],["ammo","green"],["exitLever","yellow"],["exitRailWall","yellow"],["secretExitLever","#d6d633"],["secretExitRailWall","#d6d633"],["machinegun","#aaaaaa"],["chaingun","#20b2b2"],["powerUp","#009df5"]]);for(let e of C.keys())this.colors.set(e,"gold");this.select=new B(this.colors),this.addLevelCreationListener(),this.addSelectingListener(),this.addSaveListener(),this.addUploadListener(),document.getElementById("gamerReturn"),window.onbeforeunload=()=>{if(this.editedLevel.hasChanges)return"You have unsaved changes on this page. Do you want to leave this page and discard your changes or stay on this page?"}}addLevelCreationListener(){const e=document.getElementById("createLevelForm");e.onsubmit=t=>{t.preventDefault();const n=document.getElementById("width"),r=document.getElementById("height"),i=parseInt(n.value),s=parseInt(r.value);e.remove(),this.editedLevel=new m(i,s,this.colors)}}addSaveListener(){document.getElementById("save").onclick=()=>{const e=document.createElement("a"),t=new Blob([JSON.stringify(this.editedLevel.data)],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download="level.json",e.click()}}stopEditingLevel(){var e;null===(e=this.editedLevel)||void 0===e||e.clearHtml(),this.editedLevel=null}addUploadListener(){document.getElementById("upload").onclick=()=>{const e=document.createElement("input");e.type="file",e.click(),e.onchange=e=>{const t=e.target.files[0],n=new FileReader;n.readAsText(t,"UTF-8"),n.onload=e=>{const t=e.target.result,n=JSON.parse(t),r=n.fields;this.stopEditingLevel();const i=document.getElementById("createLevelForm");null==i||i.remove(),this.editedLevel=new m(n.width,n.height,this.colors,r)}}}}addSelectingListener(){const e=e=>{const t=e.target;return"LEVEL-FIELD"==t.tagName?t:null},t=e=>{e?document.getElementById("save").removeAttribute("disabled"):document.getElementById("save").setAttribute("disabled","disabled")};document.getElementById("grid").onmousedown=n=>{const r=0==n.button,i=2==n.button;r&&(t(this.editedLevel.isValid),this.editedLevel.setValue(e(n),this.select.selectedValue)),i&&(t(this.editedLevel.isValid),this.editedLevel.clearValue(e(n)))},document.getElementById("grid").onmouseover=n=>{const r=1==n.buttons,i=2==n.buttons;r&&(t(this.editedLevel.isValid),this.editedLevel.setValue(e(n),this.select.selectedValue)),i&&(t(this.editedLevel.isValid),this.editedLevel.clearValue(e(n)))}}}window.onload=()=>{new b}})()})();
//# sourceMappingURL=levelEditor.bundle.js.map